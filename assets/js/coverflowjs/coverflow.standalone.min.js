/*! CoverflowJS - v3.0.0rc1 - 2014-01-19
* Copyright (c) 2008-2014 Paul Baukus, Addy Osmani, Sebastian Sauer, Brandon Belvin, April Barrett; Licensed MIT */
function ClassicRenderer(a,b,c,d){this.widget=a,this.element=b||$(),this.items=c||$(),this.options=d}function toRadian(a){return parseFloat((.017453*a).toFixed(6))}function ThreeDRenderer(a,b,c,d){this.widget=a,this.element=b||$(),this.items=c||$(),this.options=d}!function(a,b,c){"use strict";for(var d=b.createElement("div"),e=d.style,f=0,g=["ms","moz","webkit","o"],h=g.length,i="",j=0,k=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};h>j&&!c.requestAnimationFrame;j++)c.requestAnimationFrame=c[g[j]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[g[j]+"CancelAnimationFrame"]||c[g[j]+"CancelRequestAnimationFrame"];if(c.requestAnimationFrame||(c.requestAnimationFrame=function(a){var b=(new Date).getTime(),d=Math.max(0,16-(b-f)),e=c.setTimeout(function(){a(b+d)},d);return f=b+d,e}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)}),a.each(g,function(b,c){return"ms"!==c&&(c=k(c)),!a.support.transform&&c+"Transform"in e&&(a.support.transform=c+"Transform"),!a.support.transition&&c+"Transition"in e&&(a.support.transition=c+"Transition"),a.support.transform&&a.support.transition?(i=c,!1):!0}),a.support.transform&&a.support.transition||(a.support.transform="transform"in e?"transform":!1,a.support.transition="transition"in e?"transition":!1),null==a.cssProps)throw new Error("Your jQuery version is too old. Please upgrade.");i&&a.each(["transitionProperty","transitionDuration","transitionTimingFunction","transitionDelay","perspectiveOrigin"],function(b,c){null==a.cssProps[c]&&(a.cssProps[c]=i+k(c))}),d=null}(jQuery,document,window),function(a,b,c){function d(a,b){return typeof a===b}function e(a,b){return!!~(""+a).indexOf(b)}function f(a,b){var d,f;for(d in a)if(f=a[d],!e(f,"-")&&m[f]!==c)return"pfx"===b?f:!0;return!1}function g(a,b,e){var f,g;for(f in a)if(g=b[a[f]],g!==c)return e===!1?a[f]:d(g,"function")?g.bind(e||b):g;return!1}function h(a,b,c){var e=a.charAt(0).toUpperCase()+a.slice(1),h=(a+" "+o.join(e+" ")+e).split(" ");return d(b,"string")||d(b,"undefined")?f(h,b):(h=(a+" "+p.join(e+" ")+e).split(" "),g(h,b,c))}var i,j=b.documentElement,k="coverflowjsfeaturedetection",l=b.createElement(k),m=l.style,n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q=[].slice,r=function(a,c,d,e){var f,g,h,i,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:k+(d+1),l.appendChild(h);return f=["&#173;","<style id='s",k,"'>",a,"</style>"].join(""),l.id=k,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",i=j.style.overflow,j.style.overflow="hidden",j.appendChild(n)),g=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),j.style.overflow=i),!!g},s={}.hasOwnProperty;i=d(s,"undefined")||d(s.call,"undefined")?function(a,b){return b in a&&d(a.constructor.prototype[b],"undefined")}:function(a,b){return s.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b,c,d=this;if(!$.isFunction(d))throw new TypeError;return b=q.call(arguments,1),c=function(){if(this instanceof c){var e,f,g=function(){};return g.prototype=d.prototype,e=new g,f=d.apply(e,b.concat(q.call(arguments))),Object(f)===f?f:e}return d.apply(a,b.concat(q.call(arguments)))}}),$.support.transform3d=function(){var a=!!h("perspective");return a&&"webkitPerspective"in j.style&&r("@media (transform-3d),(-webkit-transform-3d){#coverflowjsfeaturedetection{left:9px;position:absolute;height:3px;}}",function(b){a=9===b.offsetLeft&&3===b.offsetHeight}),a}()}(this,this.document),ClassicRenderer.prototype={cssClass:"classic",itemMargin:0,initialize:function(){var a=this.options,b={},c=this.items.eq(this.widget.currentIndex);this.itemSize=c.width(),this.outerWidth=this.element.parent().outerWidth(!1),this.itemMargin=-Math.floor(a.overlap/2*c.innerWidth()),this.items.css({marginLeft:this.itemMargin,marginRight:this.itemMargin}),b.width=this.items.width()*this.items.length,$.extend(b,this._getCenterPosition()),this.element.css(b)},getItemRenderedWidth:function(){return this.itemSize},_getCenterPosition:function(){var a,b=this.itemSize,c=this.widget.currentIndex;return a=(this.outerWidth-b)/2,a-=c*this.itemSize/2,a+=parseInt(this.element.css("paddingLeft"),10)||0,a-=c*this.itemMargin*2,a-=this.itemMargin,a=Math.round(a),{left:a}},select:function(){return this._getCenterPosition()},getElementTransitionStyles:function(a){var b=$.coverflow.transition[a.easing]||$.coverflow.transition.easeOutQuint;return $.extend(this._getCenterPosition(),{transition:"left "+a.duration+"ms "+b})},refresh:function(a,b,c){var d=this,e=this.options,f=this.items.length,g=this.itemSize,h=this.itemMargin;this.items.each(function(i){var j=i===c&&0>b-c||i-c>0?"left":"right",k=i===c?1-a:i===b?a:1,l={zIndex:f+("left"===j?c-i:i-c)+10},m=1-k*(1-e.scale),n=[m,k*("right"===j?-.15:.15),0,m,0,0];l.left=-i*(g/2)+("right"===j?-g/2+g/2*e.overlap:g/2-g/2*e.overlap)*k,$.coverflow.isOldie&&i===c&&(l.left+=h,l.top=Math.ceil(h/2)),d._transform(this,l,n),$(this).css(l)})},_transform:function(){return $.support.transform?void this._matrixTransform.apply(this,arguments):void($.coverflow.isOldie&&this._fallbackTransform.apply(this,arguments))},_matrixTransform:function(a,b,c){b.transform="matrix("+c.join(",")+")"},_fallbackTransform:function(a,b,c){a.filters["DXImageTransform.Microsoft.Matrix"]||(a.style.filter=(a.style.filter?"":" ")+'progid:DXImageTransform.Microsoft.Matrix(sizingMethod="auto expand")');var d=a.filters["DXImageTransform.Microsoft.Matrix"];d.M11=c[0],d.M12=c[2],d.M21=c[1],d.M22=c[3]}},null==$.coverflow&&($.coverflow={renderer:{}}),$.extend($.coverflow.renderer,{Classic:ClassicRenderer}),ThreeDRenderer.prototype={cssClass:"3d",initialize:function(){var a={};this.itemSize=this.items.eq(this.widget.currentIndex).outerWidth(!0),this.outerWidth=this.element.parent().outerWidth(!1),a.width=this.itemSize*this.items.length,$.extend(a,this._getCenterPosition(),this._getPerspectiveOrigin()),this.element.css(a)},getItemRenderedWidth:function(){var a=this.options;return Math.cos(toRadian(a.angle))*this.itemSize*a.scale},_getPerspectiveOrigin:function(){var a=this.options;return{perspectiveOrigin:Math.round(this.itemSize/2+this.widget.currentIndex*this.getItemRenderedWidth()*(1-a.overlap))+"px "+a.perspectiveY+"%"}},_getCenterPosition:function(){var a,b=this.getItemRenderedWidth(),c=this.widget.currentIndex;return a=(this.outerWidth-this.itemSize)/2,a-=c*b,a+=c*b*this.options.overlap,a-=parseInt(this.element.css("paddingLeft"),10)||0,a=Math.round(a),{left:a}},select:function(){return $.extend({},this._getCenterPosition(),this._getPerspectiveOrigin())},getElementTransitionStyles:function(a){var b=$.coverflow.transition[a.easing]||$.coverflow.transition.easeOutQuint,c={transitionProperty:"left",transitionDuration:a.duration+"ms",transitionTimingFunction:b,transitionDelay:"initial"};$.extend(c,this._getCenterPosition(),this._getPerspectiveOrigin()),this.element.css(c)},refresh:function(a,b,c){var d=this,e=d.options,f=d.items.length,g=this.itemSize,h=d.getItemRenderedWidth();this.items.each(function(d){var i,j=d===c&&0>b-c||d-c>0?"left":"right",k=d===c?1-a:d===b?a:1,l={zIndex:f+("left"===j?c-d:d-c)+10},m=1-k*(1-e.scale),n="right"===j?e.angle:-e.angle;n=toRadian(k*n),l.left=Math.round(-d*g+k*d*h*(1-e.overlap)+(1-k)*d*h*(1-e.overlap)),i=[(m*Math.cos(n)).toFixed(6),0,Math.sin(-n).toFixed(6),0,0,m,0,0,Math.sin(n).toFixed(6),0,(m*Math.cos(n)).toFixed(6),0,0,0,0,1],l.transform="matrix3d("+i.join(", ")+")",l.transformOrigin="right"===j?"left center":"right center",$(this).css(l)})}},null==$.coverflow&&($.coverflow={renderer:{}}),$.extend($.coverflow.renderer,{ThreeD:ThreeDRenderer}),function(a,b,c){"use strict";var d={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"transitionend"},e=function(){if(void 0!==a.browser)return a.browser.msie&&~~a.browser.version<10;var b=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase());return null!==b&&b[1]&&~~b[2]<10}();a.coverflow=a.extend(!0,{},a.coverflow,{isAndroid:/android/i.test(navigator.userAgent),isOldie:e,transition:{easeInQuad:"cubic-bezier( .55,.085,.68,.53 )",easeInCubic:"cubic-bezier( .550, .055, .675, .190 )",easeInQuart:"cubic-bezier( .895, .03, .685, .22 )",easeInQuint:"cubic-bezier( .755, .05, .855, .06 )",easeInSine:"cubic-bezier( .47, 0, .745, .715 )",easeInExpo:"cubic-bezier( .95, .05, .795, .035 )",easeInCirc:"cubic-bezier( .6, .04, .98, .335 )",easeInBack:"cubic-bezier( .6, -.28, .735, .045 )",easeOutQuad:"cubic-bezier( .25,.46,.45,.94 )",easeOutCubic:"cubic-bezier( .215,.61,.355,1 )",easeOutQuart:"cubic-bezier( .165, .84, .44, 1 )",easeOutQuint:"cubic-bezier( .23, 1, .32, 1 )",easeOutSine:"cubic-bezier( .39, .575, .565, 1 )",easeOutExpo:"cubic-bezier( .19,1,.22,1 )",easeOutCirc:"cubic-bezier( .075, .82, .165, 1 )",easeOutBack:"cubic-bezier( .175, .885, .32, 1.275 )",easeInOutQuad:"cubic-bezier( .455, .03, .515, .955 )",easeInOutCubic:"cubic-bezier( .645, .045, .355, 1 )",easeInOutQuart:"cubic-bezier( .77, 0, .175, 1 )",easeInOutQuint:"cubic-bezier( .86, 0, .07, 1 )",easeInOutSine:"cubic-bezier( .445, .05, .55, .95 )",easeInOutExpo:"cubic-bezier( 1, 0, 0, 1 )",easeInOutCirc:"cubic-bezier( .785, .135, .15, .86 )",easeInOutBack:"cubic-bezier( .68, -.55, .265, 1.55 )"},renderer:{}}),a.widget("ui.coverflow",{options:{items:"> *",active:0,duration:400,easing:"easeOutQuint",angle:45,perspectiveY:45,scale:.7,overlap:.3,trigger:{itemfocus:!1,itemclick:!0,mousewheel:!0,swipe:!0}},isTicking:!1,_create:function(){var b,d,f=this.options;this.elementOrigStyle=this.element.attr("style"),this.items=this.element.find(f.items).each(function(){var b=a(this);b.data({coverflowOrigElemAttr:{style:b.attr("style"),"class":b.attr("class"),tabIndex:b.attr("tabIndex")}})}).addClass("ui-coverflow-item"),this._setDimensions(),b=a.support.transform&&!e&&null==c.opera&&a.support.transform3d?a.coverflow.renderer.ThreeD:a.coverflow.renderer.Classic,d={angle:f.angle,perspectiveY:f.perspectiveY,scale:f.scale,overlap:f.overlap,itemSize:this.itemSize,outerWidth:this.outerWidth},this.renderer=new b(this,this.element,this.items,d),this.element.addClass("ui-coverflow ui-coverflow-"+this.renderer.cssClass+"-render").parent().addClass("ui-coverflow-wrapper ui-clearfix"),f.trigger.itemfocus&&this._bindFocus(),f.trigger.itemclick&&this._on(this.items,{click:this._select}),f.trigger.mousewheel&&this._on({mousewheel:this._onMouseWheel,DOMMouseScroll:this._onMouseWheel}),f.trigger.swipe&&this._bindSwipe(),this.useJqueryAnimate=!(a.support.transition&&a.isFunction(c.requestAnimationFrame)),this.coverflowrafid=0},_bindFocus:function(){this.items.prop("tabIndex",0),this._on(this.items,{focus:this._select})},_bindSwipe:function(){var b=this.element,d=!1,e=!1;a.event.special&&a.event.special.swipe&&(d=!0,a.coverflow.isAndroid&&(a.event.special.swipe.scrollSupressionThreshold=0),a.event.special.swipe.handleSwipe=function(b,c){var d=b.coords,e=c.coords,f=a.event.special.swipe;c.time-b.time<f.durationThreshold&&Math.abs(d[0]-e[0])>f.horizontalDistanceThreshold&&Math.abs(d[1]-e[1])<f.verticalDistanceThreshold&&b.origin.trigger("swipe",{swipestart:b,swipestop:c}).trigger(b.coords[0]>c.coords[0]?"swipeleft":"swiperight",{swipestart:b,swipestop:c})},this._on({swipe:this._handleJQmSwipe})),b.hammer&&null!=c.Hammer&&(e=!0,b.hammer().on("drag swipe",function(a){Hammer.utils.isVertical(a.gesture.direction)||a.gesture.preventDefault()}),this._on({swipe:this._handleHammerSwipe})),!d&&e&&this._on({swipeleft:this.next,swiperight:this.prev})},_init:function(){var a=this.options;a.duration=~~a.duration,a.duration<1&&(a.duration=1),this.currentIndex=this._isValidIndex(a.active,!0)?a.active:0,this.activeItem=this.items.removeClass("ui-state-active").eq(this.currentIndex).addClass("ui-state-active"),this._setDimensions(),this.renderer.initialize(),this._refresh(1,this._getFrom(),this.currentIndex),this._trigger("beforeselect",null,this._ui()),this._trigger("select",null,this._ui())},_setDimensions:function(){this.itemWidth=this.items.width(),this.itemHeight=this.items.height(),this.itemSize=this.items.outerWidth(!0),this.outerWidth=this.element.parent().outerWidth(!1)},_isValidIndex:function(a,b){return b=!!b,a=~~a,(this.currentIndex!==a||b)&&a>-1&&!!this.items.get(a)},_select:function(a){this.select(a.currentTarget)},next:function(){return this.select(this.currentIndex+1)},prev:function(){return this.select(this.currentIndex-1)},_handleJQmSwipe:function(a,b){var c=b.swipestart,d=b.swipestop,e=d.time-c.time,f=d.coords[0]-c.coords[0],g=f/e,h=0>f?"left":"right";this._handleSwipe(h,g)},_handleHammerSwipe:function(a){var b=a.gesture;this._handleSwipe(b.direction,b.distance/b.deltaTime)},_handleSwipe:function(a,b){var c,d=Math.pow(b,2);d=~~(d/("left"===a?3:-3)),c=this.currentIndex+d,c===this.currentIndex?"left"===a?this.next():this.prev():this.select(0>c?0:this._isValidIndex(c)?c:this.items.length-1)},_getFrom:function(){return Math.abs(this.previous-this.currentIndex)<=1?this.previousIndex:this.currentIndex+(this.previousIndex<this.currentIndex?-1:1)},select:function(b){var e,f=this.options,g=isNaN(parseInt(b,10))?this.items.index(b):parseInt(b,10);return this._isValidIndex(g)?!1===this._trigger("beforeselect",null,this._ui(this.items.eq(g),g))?!1:(this.isTicking&&(this.useJqueryAnimate?this.element.stop(!0,!1):(this.coverflowrafid&&c.cancelAnimationFrame(this.coverflowrafid),this.element.unbind(d[a.support.transition]))),this.isTicking=!0,this.previousIndex=this.currentIndex,f.active=this.currentIndex=g,e=a.extend({},this.renderer.select(),{coverflow:1}),this.useJqueryAnimate?this._animation(f,e):(f=a.extend({duration:f.duration,easing:f.easing},e),this._transition(f)),!0):!1},_animation:function(b,c){var d=this,e=this._getFrom();a.fx.step.coverflow=function(a){d._refresh(a.now,e,d.currentIndex)},this.element.animate(c,{duration:b.duration,easing:b.easing}).promise().done(function(){d._onAnimationEnd()})},_transition:function(b){var e=this,f=new Date,g=this._getFrom(),h=this.currentIndex,i={},j=function(){var a=((new Date).getTime()-f.getTime())/b.duration;a>1?e.isTicking=!1:e._refresh(a,g,h),e.isTicking&&(e.coverflowrafid=c.requestAnimationFrame(j))};a.isFunction(this.renderer.getElementTransitionStyles)&&(i=a.extend(i,this.renderer.getElementTransitionStyles(b))),this.element.one(d[a.support.transition],function(){e._refresh(1,g,h),e._onAnimationEnd()}).css(i),this.coverflowrafid=c.requestAnimationFrame(j)},_onAnimationEnd:function(){this.coverflowrafid&&cancelAnimationFrame(this.coverflowrafid),this.isTicking=!1,this.activeItem=this.items.removeClass("ui-state-active").eq(this.currentIndex).addClass("ui-state-active"),this._trigger("select",null,this._ui())},_refresh:function(a,b,c){this.element.parent().scrollTop(0),this.renderer.refresh(a,b,c)},_ui:function(a,b){return{active:a||this.activeItem,index:null!=b?b:this.currentIndex}},_onMouseWheel:function(a){var b=a.originalEvent;return a.preventDefault(),b.wheelDelta>0||b.detail<0?void this.prev():void this.next()},_destroy:function(){void 0!==this.elementOrigStyle?this.element.attr("style",this.elementOrigStyle):this.element.removeAttr("style"),this.element.removeClass("ui-coverflow ui-helper-clearfix ui-coverflow-"+(this.renderer.cssClass||"classic")+"-render").parent().removeClass("ui-coverflow-wrapper ui-clearfix"),this.items.removeClass("ui-coverflow-item ui-state-active").each(function(){var b=a(this),c=b.data("coverflowOrigElemAttr");a.each(c,function(a,c){void 0!==c?b.attr(a,c):b.removeAttr(a)}),b.data("coverflowOrigElemAttr",null)}),this._super()}})}(jQuery,document,window);